{% extends 'base.html' %}
{% load i18n %}

{% block content %}

<style>
  .row > * {
    padding-left: 0;
  }
</style>

{% if poem.is_hidden and not user.username == poem.saved_by %}
<div class="container-fluid" style="margin-left: 0px; background-color: aliceblue; text-align: center; padding-bottom: 10px; padding-left: 30px;">
  <h class="display-6">{% trans 'This poem is hidden by its author.' %}</h>
</div>
{% else %}
<div class="container-fluid" style="margin-left: 0px; background-color: aliceblue; padding-bottom: 10px; padding-left: 30px;">
  <form action="{% url 'poem_update' poem.id %}" method="post">
    {% csrf_token %}

    <!-- Hidden input for redirecting to poem_update -->
    <input type="text" hidden value="1" name="edit">

    <!-- Language engine -->
    <h class="display-6">{% trans "Translation Service" %} - {{ poem.language_engine }}</h>
    <div class="row" hidden>{{ form.language_engine }}</div>

    <div class="row" style="max-width: fit-content; margin-top: 10px;">
    
      <!-- Source language -->
      <div class="col">
        <input hidden type="text" value="{{ form.souce_lang.value }}" name="souce_lang">
        {{ form.source_lang }}
      </div>
    
      <!-- A simple right arrow -> -->
      <div class="col my-auto"><svg style="margin-left: 10px; margin-right: 10px;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z" /></svg></div>
    
      <!-- Target language -->
      <div class="col">
        <input hidden type="text" value="{{ form.target_lang.value }}" name="target_lang">
        {{ form.target_lang }}
      </div>
    
      <!-- If user is poem's author, show the Change button -->
      {% if user.username == poem.saved_by %}
      <div class="col">
        <button class="btn btn-primary" type="submit">{% trans "Change Poem" %}</button>
      </div>
      {% endif %}
    
    </div>

    <!-- Updated at (hidden) -->
    <div class="col" hidden>{{ form.updated_at }}</div>

    <div class="row" style="margin-top: 20px">

      <!-- Title -->
      <div class="col">
        <h class="display-6" for="title">{% trans "Title" %}</h>
        {{ form.title|safe }}
      </div>

      <!-- Author -->
      <div class="col">
        <h class="display-6" for="author">{% trans "Author" %}</h>
        {{ form.author|safe }}
      </div>

      <!-- Saved By (user) -->
      <div class="col">
        <h class="display-6" for="saved_by">{% trans "Saved by" %}</h>
        {{ form.saved_by|safe }}
      </div>

      <!-- Is hidden from library -->
      <div class="col-lg-2 col-md-3 col-sm-6 form-check form-switch" style="margin-left: 45px; position: relative;">
        <div style="position: absolute; bottom: 0;">
          {{ form.is_hidden|safe }}
          <input hidden type="text" value="{{ form.is_hidden.value }}" name="is_hidden">
          <label class="form-check-label" for="flexSwitchCheckDefault">{% trans "Hide from Poem Library" %}</label>
        </div>
      </div>

      <div class="col"></div>
      <div class="col"></div>
    </div>

    <div class="row">
      
      <!-- Original text -->
      <div class="col">
        <h class="display-6">
          {% trans "Original Text" %}
        </h>
        {{ form.original_text|safe }}
      </div>

      <!-- Translation text -->
      <div class="col">
        <h class="display-6">
          {% trans "Translation" %}
        </h>
        {{ form.translation|safe }}
      </div>
    </div>
  </form>
</div>
{% endif %}
{% endblock %}